!function(o){var t,n,i,l,r,d,p,c,u,h,f,v,g,w=!1;function m(){"function"!=typeof zxcvbn?setTimeout(m,50):(i.val(i.data("pw")),i.trigger("pwupdate").trigger("wp-check-valid-field"),1!==parseInt(u.data("start-masked"),10)?n.addClass("show-password"):u.trigger("click"))}function b(){u.data("toggle",0).attr({"aria-label":userProfileL10n.ariaHide}).find(".text").text(userProfileL10n.hide).end().find(".dashicons").removeClass("dashicons-visibility").addClass("dashicons-hidden"),l.focus(),r.attr("for","pass1-text")}function s(){var e,s,a;t=o(".user-pass1-wrap"),r=t.find("th label").attr("for","pass1-text"),o(".user-pass2-wrap").hide(),f=o("#submit").on("click",function(){w=!1}),h=f.add(" #createusersub"),p=o(".pw-weak"),(c=p.find(".pw-checkbox")).change(function(){h.prop("disabled",!c.prop("checked"))}),(i=o("#pass1")).length&&(a=o("#pass-strength-result")[0],v=i.val(),n=i.parent(),l=o('<input type="text"/>').attr({id:"pass1-text",name:"pass1-text",autocomplete:"off"}).addClass(i[0].className).data("pw",i.data("pw")).val(i.val()).on(g,function(){l.val()!==v&&(d.val(l.val()),i.val(l.val()).trigger("pwupdate"),v=l.val())}),i.after(l),1===parseInt(i.data("reveal"),10)&&m(),i.on(g+" pwupdate",function(){i.val()!==v&&(v=i.val(),l.val()!==v&&l.val(v),i.add(l).removeClass("short bad good strong"),a.className&&(i.add(l).addClass(a.className),"short"===a.className||"bad"===a.className?(c.prop("checked")||h.prop("disabled",!0),p.show()):(h.prop("disabled",!1),p.hide())))})),d=o("#pass2").on(g,function(){0<d.val().length&&(i.val(d.val()),d.val(""),v="",i.trigger("pwupdate"))}),i.is(":hidden")&&(i.prop("disabled",!0),d.prop("disabled",!0),l.prop("disabled",!0)),e=t.find(".wp-pwd"),s=t.find("button.wp-generate-pw"),(u=t.find(".wp-hide-pw")).show().on("click",function(){1===parseInt(u.data("toggle"),10)?(n.addClass("show-password"),b(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)):(n.removeClass("show-password"),u.data("toggle",1).attr({"aria-label":userProfileL10n.ariaShow}).find(".text").text(userProfileL10n.show).end().find(".dashicons").removeClass("dashicons-hidden").addClass("dashicons-visibility"),i.focus(),r.attr("for","pass1"),_.isUndefined(i[0].setSelectionRange)||i[0].setSelectionRange(0,100))}),s.length&&e.hide(),s.show(),s.on("click",function(){w=!0,s.hide(),e.show(),i.attr("disabled",!1),d.attr("disabled",!1),l.attr("disabled",!1),0===l.val().length&&m(),_.defer(function(){l.focus(),_.isUndefined(l[0].setSelectionRange)||l[0].setSelectionRange(0,100)},0)}),t.find("button.wp-cancel-pw").on("click",function(){w=!1,l.val(""),wp.ajax.post("generate-password").done(function(e){i.data("pw",e)}),s.show(),e.hide(),i.prop("disabled",!0),d.prop("disabled",!0),l.prop("disabled",!0),b(),i.val("").trigger("pwupdate"),h.prop("disabled",!1)}),t.closest("form").on("submit",function(){w=!1,i.prop("disabled",!1),d.prop("disabled",!1),d.val(i.val()),n.removeClass("show-password")})}function k(){var e=o("#pass1").val();if(o("#pass-strength-result").removeClass("short bad good strong"),e)switch(wp.passwordStrength.meter(e,wp.passwordStrength.userInputBlacklist(),e)){case 2:o("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:o("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:o("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:o("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:o("#pass-strength-result").addClass("short").html(pwsL10n["short"])}else o("#pass-strength-result").html("&nbsp;")}g="oninput"in document.createElement("input")?"input":"keyup",o(document).ready(function(){var e,a,t,n,i=o("#display_name");o("#pass1").val("").on(g+" pwupdate",k),o("#pass-strength-result").show(),o(".color-palette").click(function(){o(this).siblings('input[name="admin_color"]').prop("checked",!0)}),i.length&&o("#first_name, #last_name, #nickname").bind("blur.user_profile",function(){var a=[],t={display_nickname:o("#nickname").val()||"",display_username:o("#user_login").val()||"",display_firstname:o("#first_name").val()||"",display_lastname:o("#last_name").val()||""};t.display_firstname&&t.display_lastname&&(t.display_firstlast=t.display_firstname+" "+t.display_lastname,t.display_lastfirst=t.display_lastname+" "+t.display_firstname),o.each(o("option",i),function(e,s){a.push(s.value)}),o.each(t,function(e,s){s&&(s=s.replace(/<\/?[a-z][^>]*>/gi,""),t[e].length&&-1===o.inArray(s,a)&&(a.push(s),o("<option />",{text:s}).appendTo(i)))})}),e=o("#color-picker"),a=o("#colors-css"),t=o("input#user_id").val(),n=o('input[name="checkuser_id"]').val(),e.on("click.colorpicker",".color-option",function(){var e,s=o(this);if(!s.hasClass("selected")&&(s.siblings(".selected").removeClass("selected"),s.addClass("selected").find('input[type="radio"]').prop("checked",!0),t===n)){if((a=0===a.length?o('<link rel="stylesheet" />').appendTo("head"):a).attr("href",s.children(".css_url").val()),"undefined"!=typeof wp&&wp.svgPainter){try{e=o.parseJSON(s.children(".icon_colors").val())}catch(e){}e&&(wp.svgPainter.setColors(e),wp.svgPainter.paint())}o.post(ajaxurl,{action:"save-user-color-scheme",color_scheme:s.children('input[name="admin_color"]').val(),nonce:o("#color-nonce").val()}).done(function(e){e.success&&o("body").removeClass(e.data.previousScheme).addClass(e.data.currentScheme)})}}),s()}),o("#destroy-sessions").on("click",function(e){var s=o(this);wp.ajax.post("destroy-sessions",{nonce:o("#_wpnonce").val(),user_id:o("#user_id").val()}).done(function(e){s.prop("disabled",!0),s.siblings(".notice").remove(),s.before('<div class="notice notice-success inline"><p>'+e.message+"</p></div>")}).fail(function(e){s.siblings(".notice").remove(),s.before('<div class="notice notice-error inline"><p>'+e.message+"</p></div>")}),e.preventDefault()}),window.generatePassword=m,o(window).on("beforeunload",function(){if(!0===w)return userProfileL10n.warn})}(jQuery);