var wpActiveEditor,tb_position,send_to_editor=function(e){var i,t="undefined"!=typeof tinymce,n="undefined"!=typeof QTags;if(wpActiveEditor)t&&(i=!tinymce.activeEditor||"mce_fullscreen"!=tinymce.activeEditor.id&&"wp_mce_fullscreen"!=tinymce.activeEditor.id?tinymce.get(wpActiveEditor):tinymce.activeEditor);else if(t&&tinymce.activeEditor)i=tinymce.activeEditor,wpActiveEditor=i.id;else if(!n)return!1;i&&!i.isHidden()?(tinymce.isIE&&i.windowManager.insertimagebookmark&&i.selection.moveToBookmark(i.windowManager.insertimagebookmark),-1!==e.indexOf("[caption")?i.wpSetImgCaption&&(e=i.wpSetImgCaption(e)):-1!==e.indexOf("[gallery")?i.plugins.wpgallery&&(e=i.plugins.wpgallery._do_gallery(e)):0===e.indexOf("[embed")&&i.plugins.wordpress&&(e=i.plugins.wordpress._setEmbed(e)),i.execCommand("mceInsertContent",!1,e)):n?QTags.insertContent(e):document.getElementById(wpActiveEditor).value+=e;try{tb_remove()}catch(e){}};!function(r){tb_position=function(){var e=r("#TB_window"),i=r(window).width(),t=r(window).height(),n=720<i?720:i,o=0;return r("body.admin-bar").length&&(o=parseInt(jQuery("#wpadminbar").css("height"),10)),e.size()&&(e.width(n-50).height(t-45-o),r("#TB_iframeContent").width(n-50).height(t-75-o),e.css({"margin-left":"-"+parseInt((n-50)/2,10)+"px"}),void 0!==document.body.style.maxWidth&&e.css({top:20+o+"px","margin-top":"0"})),r("a.thickbox").each(function(){var e=r(this).attr("href");e&&(e=(e=e.replace(/&width=[0-9]+/g,"")).replace(/&height=[0-9]+/g,""),r(this).attr("href",e+"&width="+(n-80)+"&height="+(t-85-o)))})},r(window).resize(function(){tb_position()}),r(document).ready(function(e){e("a.thickbox").click(function(){var e;"undefined"!=typeof tinymce&&tinymce.isIE&&(e=tinymce.get(wpActiveEditor))&&!e.isHidden()&&(e.focus(),e.windowManager.insertimagebookmark=e.selection.getBookmark())})})}(jQuery);