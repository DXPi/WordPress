var tinyMCEPopup={init:function(){var n=this,e=n.getWin();tinymce=e.tinymce,tinyMCE=e.tinyMCE,n.editor=tinymce.EditorManager.activeEditor,n.params=n.editor.windowManager.params,n.features=n.editor.windowManager.features,n.dom=tinymce.dom,n.listeners=[],n.onInit={add:function(e,t){n.listeners.push({func:e,scope:t})}},n.isWindow=!1,n.id=n.features.id,n.editor.windowManager.onOpen.dispatch(n.editor.windowManager,window)},getWin:function(){return window},getWindowArg:function(e,t){e=this.params[e];return tinymce.is(e)?e:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,o){return(o=o||{}).skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,o)},resizeToInnerSize:function(){var t=this;setTimeout(function(){var e=t.dom.getViewPort(window);t.editor.windowManager.resizeBy(t.getWindowArg("mce_width")-e.w,t.getWindowArg("mce_height")-e.h,t.id||window)},0)},executeOnLoad:function(s){this.onInit.add(function(){eval(s)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){!tinyMCEPopup.isWindow&&tinymce.isIE&&tinyMCEPopup.editor.selection.moveToBookmark(tinyMCEPopup.editor.windowManager.bookmark)},requireLangPack:function(){var e=this,t=e.getWindowArg("plugin_url")||e.getWindowArg("theme_url");t&&e.editor.settings.language&&!1!==e.features.translate_i18n&&(t+="/langs/"+e.editor.settings.language+"_dlg.js",tinymce.ScriptLoader.isDone(t)||(document.write('<script type="text/javascript" src="'+tinymce._addVer(t)+'"><\/script>'),tinymce.ScriptLoader.markDone(t)))},pickColor:function(e,t){this.execCommand("mceColorPicker",!0,{color:document.getElementById(t).value,func:function(e){document.getElementById(t).value=e;try{document.getElementById(t).onchange()}catch(e){}}})},openBrowser:function(e,t,n){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){var e=this;function t(){e.editor.windowManager.close(window),e.editor=null}tinymce.isOpera?e.getWin().setTimeout(t,0):t()},_restoreSelection:function(e){e=e&&e.target?e.target:window.event.srcElement;"INPUT"!=e.nodeName||"submit"!=e.type&&"button"!=e.type||tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var e,t,n=tinyMCEPopup,o=document.title;n.domLoaded||(n.domLoaded=1,tinyMCEPopup.init(),!1!==n.features.translate_i18n&&(e=document.body.innerHTML,tinymce.isIE&&(e=e.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=n.editor.getParam("directionality",""),(t=n.editor.translate(e))&&t!=e&&(document.body.innerHTML=t),(t=n.editor.translate(o))&&t!=o&&(document.title=o=t)),document.body.style.display="",tinymce.isIE&&!tinymce.isIE11?(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),n.dom.add(n.dom.select("head")[0],"base",{target:"_self"})):tinymce.isIE11&&document.addEventListener("mouseup",tinyMCEPopup._restoreSelection,!1),n.restoreSelection(),n.isWindow?window.focus():n.editor.windowManager.setTitle(window,o),tinymce.isIE||n.isWindow||tinymce.dom.Event._add(document,"focus",function(){n.editor.windowManager.focus(n.id)}),tinymce.each(n.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(n.listeners,function(e){e.func.call(e.scope,n.editor)}),n.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(e){tinymce.each(e.elements,function(e){if(n.dom.hasClass(e,"mceFocus")&&!e.disabled)return e.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler)},_accessHandler:function(e){if(13==(e=e||window.event).keyCode||32==e.keyCode)return(e=e.target||e.srcElement).onchange&&e.onchange(),tinymce.dom.Event.cancel(e)},_closeWinKeyHandler:function(e){27==(e=e||window.event).keyCode&&tinyMCEPopup.close()},_wait:function(){document.attachEvent?(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),tinyMCEPopup._onDOMLoaded())}),document.documentElement.doScroll&&window==window.top&&function(){if(!tinyMCEPopup.domLoaded){try{document.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}tinyMCEPopup._onDOMLoaded()}}(),document.attachEvent("onload",tinyMCEPopup._onDOMLoaded)):document.addEventListener&&(window.addEventListener("DOMContentLoaded",tinyMCEPopup._onDOMLoaded,!1),window.addEventListener("load",tinyMCEPopup._onDOMLoaded,!1))}};