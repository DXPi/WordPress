tinymce.PluginManager.add("wplink",function(e){e.addCommand("WP_Link",function(){window.wpLink&&window.wpLink.open(e.id)}),e.addShortcut("Alt+Shift+A","","WP_Link"),e.addShortcut("Meta+K","","WP_Link"),e.addButton("link",{icon:"link",tooltip:"Insert/edit link",cmd:"WP_Link",stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink"}),e.addMenuItem("link",{icon:"link",text:"Insert/edit link",cmd:"WP_Link",stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.on("pastepreprocess",function(n){var t=n.content;e.selection.isCollapsed()||(t=t.replace(/<[^>]+>/g,""),t=tinymce.trim(t),/^(?:https?:)?\/\/\S+$/i.test(t)&&(e.execCommand("mceInsertLink",!1,{href:e.dom.decode(t)}),n.preventDefault()))})});